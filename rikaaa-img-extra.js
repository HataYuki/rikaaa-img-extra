/**
 * @license
 * rikaaa-img-extra.js
 *
 * Generated : 2019-08-04
 * Version : 1.1.0
 * Author : rikaaa.org | Yuki Hata
 * Url : http://rikaaa.org
 *
 *
 * The MIT License (MIT)
 *
 * Copyright 2019 rikaaa.org | Yuki Hata
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t,e,i){return(n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a}).apply(null,arguments)}function i(t){var a="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(t))return a.get(t);a.set(t,o)}function o(){return n(t,arguments,e(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),r(o,t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t,e){return t(e={exports:{}},e.exports),e.exports}var l=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.is=function(e,r,n){void 0===n&&(n="0px");var i=t.computeParentNode(r,e);if(!1===i)return!1;for(var a=t.computeCheckTargetRectList(r,i,n),o=t.getBoundingClientRect(e),s=0;s!==a.length;){var c=a[s];if(c.width<=0||c.height<=0)return!1;if(c.bottom<=o.top||c.top>=o.bottom)return!1;s++}return!0},t.computeParentNode=function(e,r){for(var n=e||document.documentElement,i=[],a=document.documentElement,o=r;o!==a;)o=t.getParentNode(o),i.push(o);return!!i.includes(n)&&i.splice(0,i.indexOf(n)+1)},t.computeCheckTargetRectList=function(e,r,n){var i=e||document.documentElement;return r.map(function(e){return e!==i?t.getBoundingClientRect(e):t.getRootRect(e,n)})},t.getRootRect=function(e,r){var n=null,i=document.documentElement;return n=e!==i?t.getBoundingClientRect(e):{top:0,bottom:i.clientHeight,right:i.clientWidth,left:0,width:i.clientWidth,height:i.clientHeight},t.applyRootMargin(n,r)},t.applyRootMargin=function(e,r){var n=t.parseRootMargin(r),i=e.width,a=e.height,o="px"===n.top[1]?n.top[0]:a*n.top[0]/100,s="px"===n.bottom[1]?n.bottom[0]:a*n.bottom[0]/100,c="px"===n.right[1]?n.right[0]:i*n.right[0]/100,l="px"===n.left[1]?n.left[0]:i*n.left[0]/100,u={top:e.top-o,bottom:e.bottom+s,right:e.right+c,left:e.left-l,width:0,height:0};return u.width=u.right-u.left,u.height=u.bottom-u.top,u},t.parseRootMargin=function(t){var e=t.split(" "),r=function(t){return[parseFloat(t),t.match(/(px|%)/)[0]]},n={top:null,bottom:null,right:null,left:null};switch(e.length){case 1:n.top=r(e[0]),n.bottom=r(e[0]),n.right=r(e[0]),n.left=r(e[0]);break;case 2:n.top=r(e[0]),n.bottom=r(e[0]),n.right=r(e[1]),n.left=r(e[1]);break;case 4:n.top=r(e[0]),n.bottom=r(e[2]),n.right=r(e[1]),n.left=r(e[3])}return n},t.getParentNode=function(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e},t.getBoundingClientRect=function(t){var e=null;try{return t.getBoundingClientRect()}catch(t){}if(null===e)return{top:0,bottom:0,left:0,right:0,width:0,height:0}},t}();e.default=r});s(l);var u=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"none"!==(t.currentStyle||getComputedStyle(t,"")).display}});s(u);var h=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,r=!0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r?(e=t.apply(this,n),r=!1,e):(t=null,!1)}}});s(h);var f=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=null;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];clearTimeout(r),r=setTimeout(function(){return t.apply(this,n)},e)}}});s(f);var d=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=null,n=null,i=h.default(t),a=f.default(t,e),o=f.default(function(){i=h.default(t),n=null,cancelAnimationFrame(r)},e);return function(){for(var s=this,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return i.apply(this,c),r=requestAnimationFrame(function(i){if(null===n&&(n=i),i-n>=e)return n=null,cancelAnimationFrame(r),t.apply(s,c)}),o(),a.apply(this,c)}}});s(d);var p=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){void 0===r&&(r={observValKeyName:"watch"});var n=t,i=r.observValKeyName;return function(t){for(var r=[],a=null,o=0;o<arguments.length;o++)arguments[o]&&arguments[o].constructor==Object?(a=arguments[o][i],delete arguments[o][i],Object.keys(arguments[o]).length>0&&r.push(arguments[o])):r.push(arguments[o]);return n!==a&&(n=a,e.apply(this,r))}}});s(p),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var i,a,o=0|e,s=Math.max(o>=0?o:n-Math.abs(o),0);for(;s<n;){if((i=r[s])===(a=t)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;s++}return!1}});var g=c(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.instancesOfintersectionWatcher=[],this.targetsAll=[],this.scrollAreasOftargets=[],this.mutationObserverConfig={childList:!0,attributes:!0,characterData:!0,subtree:!0},this.watcher_binded=d.default(t.watcher.bind(null,this),t.THROTTLE_INTERVAL),this.mo=new MutationObserver(this.watcher_binded),this.firstCallback=f.default(h.default(function(e){e.forEach(function(e){var r=e.entries.map(function(e){if(t.isDisplay(e.target))return Object.freeze({target:e.target,isIntersecting:e.isIntersecting})}).filter(function(t){return void 0!==t});0!==r.length&&e.callback(r)})}),t.THROTTLE_INTERVAL)}return t.prototype.init=function(t){this.instancesOfintersectionWatcher.push(t)},t.prototype.observe=function(){this.targetsAll=t.updateTargetsAll(this),this.scrollAreasOftargets=t.updateScrollAreasOftargets(this.targetsAll),0!==this.targetsAll.length&&t.onWather(this),this.entriesContaner=t.calculateEntriesContaner(this.instancesOfintersectionWatcher),this.firstCallback(this.entriesContaner)},t.prototype.unobserve=function(){this.targetsAll=t.updateTargetsAll(this),this.entriesContaner=t.calculateEntriesContaner(this.instancesOfintersectionWatcher)},t.prototype.disconnect=function(){this.targetsAll=t.updateTargetsAll(this),this.entriesContaner=t.calculateEntriesContaner(this.instancesOfintersectionWatcher),0===this.targetsAll.length&&(t.offWather(this),this.scrollAreasOftargets=[])},t.watcher=function(e){e.entriesContaner.forEach(function(e){var r=e.entries.map(function(r){var n=e.option,i=t.isDisplay(r.target),a=t.isIntersecting(r.target,n.root,n.rootMargin),o=r.valueObserver({watch:a});if(o&&(r.isIntersecting=a),i&&o)return Object.freeze({target:r.target,isIntersecting:r.isIntersecting})}).filter(function(t){return void 0!==t});0!==r.length&&e.callback(r)})},t.calculateEntriesContaner=function(e){return e.map(function(e){var r=e.option,n=e.targets.map(function(e){var n=t.isIntersecting(e,r.root,r.rootMargin);return{target:e,isIntersecting:n,valueObserver:p.default(n,function(){return!0})}});return e.entries=n,e})},t.updateTargetsAll=function(t){return t.instancesOfintersectionWatcher.map(function(t){return t.targets}).reduce(function(t,e){return t.concat(e)},[])},t.updateScrollAreasOftargets=function(t){return t.map(function(t){return function(t){for(var e=[],r=document.documentElement,n=t;n!==r;)n=l.default.getParentNode(n),e.push(n);return e}(t).filter(function(t){var e=getComputedStyle(t,"");if("scroll"===e.overflow||"auto"===e.overflow||"scroll"===e.overflowY||"auto"===e.overflowY)return!0})}).reduce(function(t,e){return t.concat(e)},[])},t.onWather=function(t){var e={passive:!0};window.addEventListener("resize",t.watcher_binded,!1),window.addEventListener("scroll",t.watcher_binded,e),document.documentElement.addEventListener("scroll",t.watcher_binded,e),document.body.addEventListener("scroll",t.watcher_binded,e),t.mo.observe(document.querySelector("html"),t.mutationObserverConfig),t.scrollAreasOftargets.forEach(function(r){r.addEventListener("scroll",t.watcher_binded,e)})},t.offWather=function(t){window.removeEventListener("resize",t.watcher_binded),window.removeEventListener("scroll",t.watcher_binded),document.documentElement.removeEventListener("scroll",t.watcher_binded),document.body.removeEventListener("scroll",t.watcher_binded),t.mo.disconnect(),t.scrollAreasOftargets.forEach(function(e){e.removeEventListener("scroll",t.watcher_binded)})},t.isIntersecting=function(t,e,r){return l.default.is(t,e,r)},t.isDisplay=function(t){return u.default(t)},Object.defineProperty(t,"THROTTLE_INTERVAL",{get:function(){return 33},enumerable:!0,configurable:!0}),t}();e.default=r});s(g);var v=s(c(function(t,e){var r=o&&o.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n={rootMargin:"0px",root:null},i=new g.default,a=function(){function t(t,e){void 0===e&&(e={}),this.callback=t,this.targets=[],this.entries=[],this.option=r({},n,e),i.init(this)}return t.prototype.observe=function(t){this.targets.includes(t)||this.targets.push(t),i.observe()},t.prototype.unobserve=function(t){this.targets=this.targets.filter(function(e){return e!==t}),i.unobserve()},t.prototype.disconnect=function(){this.targets=[],i.disconnect()},t.isIntersecting=function(t,e,r){return g.default.isIntersecting(t,e,r)},t.isDisplay=function(t){return g.default.isDisplay(t)},Object.defineProperty(t,"THROTTLE_INTERVAL",{get:function(){return g.default.THROTTLE_INTERVAL},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CONTROLLER",{get:function(){return i},enumerable:!0,configurable:!0}),t}();e.default=a})),y=function(t){var e,r=!0;return function(){return r?(e=t.apply(this,arguments),r=!1,e):(t=null,!1)}},b=function(t,e,r){return Math.max(e,Math.min(r,t))},m=function(t,e,r,n,i){return n+(t-e)/(r-e)*(i-n)};Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var i,a,o=0|e,s=Math.max(o>=0?o:n-Math.abs(o),0);for(;s<n;){if((i=r[s])===(a=t)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;s++}return!1}});var w="<style>".concat(":host {  position: relative;  display: block;  width: 100%; }  :host .placeholder_container,  :host .svg_container {    position: relative;    width: 100%; }    :host .placeholder_container .spacer,    :host .placeholder_container .svg_spacer,    :host .svg_container .spacer,    :host .svg_container .svg_spacer {      display: block; }      :host .placeholder_container .spacer .placeholder,      :host .placeholder_container .spacer .svg_wp,      :host .placeholder_container .svg_spacer .placeholder,      :host .placeholder_container .svg_spacer .svg_wp,      :host .svg_container .spacer .placeholder,      :host .svg_container .spacer .svg_wp,      :host .svg_container .svg_spacer .placeholder,      :host .svg_container .svg_spacer .svg_wp {        position: absolute;        display: block;        top: 0;        left: 0;        bottom: 0;        right: 0; }  :host ::slotted(*) {    vertical-align: bottom; }","</style>"),_="\n    ".concat(w,'\n    <div class="placeholder_container">\n        <div class="spacer">\n            <slot class="placeholder" name="placeholder"></slot>\n        </div>\n    </div>\n    <div class="svg_container">\n        <div class="svg_spacer">\n            <div class="svg_wp">\n                <svg width="100%" height="100%"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <filter id="rikaaa-ex-filter">\n                        \x3c!-- blur --\x3e\n                        <feGaussianBlur stdDeviation="0"/>\n                        \x3c!-- other --\x3e\n                        <feColorMatrix type="matrix" id="contrast" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="brightness" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="saturate" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="hue-rotate" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="invert" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="grayscale" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                        <feColorMatrix type="matrix" id="sepia" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0" />\n                    </filter>\n                    <image width="100%" height="100%" x="0" y="0" filter="url(#rikaaa-ex-filter)">  \n                </svg>\n            </div>\n        </div>\n    </div>\n    <div class="img_container">\n        <slot class="rikaaa-img-extra-wp"></slot>\n    </div>\n'),A=function(n){function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=document.createElement("template");n.id="rikaaaimgextra",n.innerHTML=_;var i,s,c=n.content.querySelector("filter"),l=n.content.querySelector("image"),u="".concat(c.id,"_").concat(r);return c.id=u,l.setAttribute("filter","url(#".concat(u,")")),i=this,t=!(s=e(o).call(this))||"object"!=typeof s&&"function"!=typeof s?a(i):s,window.ShadyCSS&&ShadyCSS.prepareTemplate(n,"rikaaa-img-extra"),window.ShadyCSS&&ShadyCSS.styleElement(a(t)),t.attachShadow({mode:"open"}),t.shadowRoot.appendChild(n.content.cloneNode(!0)),window.IntersectionObserver||window.WcRikaaaIntersectionObserver||Object.defineProperty(window,"WcRikaaaIntersectionObserver",{value:v}),t.intersectionobserver=window.IntersectionObserver||window.WcRikaaaIntersectionObserver,t.load=y(t.loadImage.bind(a(t))),t}var s,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(o,i(HTMLElement)),s=o,l=[{key:"observedAttributes",get:function(){return["blur","contrast","brightness","saturate","hue-rotate","invert","opacity","grayscale","sepia","loadtiming"]}}],(c=[{key:"connectedCallback",value:function(){var t=this;this.filters=[],this.isSafari=/.*Version.*Safari.*/.test(navigator.userAgent),this.src=this.getAttribute("data-src"),this.alt=this.getAttribute("data-alt"),this.size=this.getAttribute("size").split("x"),this.aspect=this.size.reduce(function(t,e,r,n){var i={},a=function t(e,r){return r?t(r,e%r):e};return 0===r&&(i.w=e/a(n[1],n[0])),1===r&&(i.h=e/a(n[1],n[0])),Object.assign(t,i)},{}),this.wp=this.shadowRoot.querySelector(".rikaaa-img-extra-wp"),this.placeholder_container=this.shadowRoot.querySelector(".placeholder_container"),this.spacer=this.shadowRoot.querySelector(".spacer"),this.svg=this.shadowRoot.querySelector("svg"),this.svgImage=this.shadowRoot.querySelector("image"),this.svgspacer=this.shadowRoot.querySelector(".svg_spacer"),this.loadTiming="100px 0px 100px 0px";y(function(){t.placeholder()})(),this.prepareloadImage(null,this.loadTiming),this.dispatchEvent(new CustomEvent("load"))}},{key:"disconnectedCallback",value:function(){this.readyLoadImage.unobserve(this),this.loadImage.disconnect()}},{key:"attributeChangedCallback",value:function(t,e,r){void 0===this.filters&&(this.filters=[]),this.svg=this.shadowRoot.querySelector("svg"),this._filter_op=1,this.isSafari=/.*Version.*Safari.*/.test(navigator.userAgent),"blur"===t&&(this.blur=r),"contrast"===t&&(this.contrast=r),"brightness"===t&&(this.brightness=r),"saturate"===t&&(this.saturate=r),"hue-rotate"===t&&(this.hue_rotate=r),"invert"===t&&(this.invert=r),"opacity"===t&&(this.opacity=r),"grayscale"===t&&(this.grayscale=r),"sepia"===t&&(this.sepia=r),"loadtiming"===t&&(this.loadTiming=r),this.isSafari&&(this.shadowRoot.querySelector(".img_container").style.filter=this.filters.toString().replace(/,/g," "))}},{key:"arraytomatrixval",value:function(t){return t.reduce(function(t,e){return t.concat(e)},[]).toString().replace(/,/g," ")}},{key:"prepareloadImage",value:function(t,e){var r=this;this.readyLoadImage&&(this.readyLoadImage.unobserve(this),this.readyLoadImage.disconnect());var n={};t&&(n.root=t),e&&(n.rootMargin=e),this.readyLoadImage=new this.intersectionobserver(function(t){t[0].isIntersecting&&r.load()},n),this.readyLoadImage.observe(this)}},{key:"setRoot",value:function(t){this.prepareloadImage(t,this.loadTiming)}},{key:"placeholder",value:function(){var t=document.createElement("img");t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",t.slot="placeholder",Object.assign(t.style,{width:"100%",height:"100%"}),Object.assign(this.spacer.style,{paddingBottom:"".concat(this.aspect.h/this.aspect.w*100,"%")}),this.placeholderNode=t,this.appendChild(t)}},{key:"loadImage",value:function(){var t=this,e=document.createElement("img");this.img=e,e.src=this.src,e.alt=this.alt,Object.assign(e.style,{width:"100%"});e.addEventListener("load",function(){t.placeholder_container.style.display="none",t.isSafari?t.appendChild(e):(Object.assign(t.svg.style,{fontSize:"0px"}),t.svgImage.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),Object.assign(t.svgspacer.style,{paddingBottom:"".concat(t.aspect.h/t.aspect.w*100,"%")}))}),this.dispatchEvent(new CustomEvent("loadImage"))}},{key:"blur",set:function(t){this.isSafari?this.filters[0]="blur(".concat(t,"px)"):this.svg.querySelector("feGaussianBlur").setAttribute("stdDeviation",t)}},{key:"contrast",set:function(t){var e=Math.max(1,t);if(this.isSafari)this.filters[1]="contrast(".concat(e,")");else{var r=this.svg.getElementById("contrast"),n=(1-e)/2,i=[[e,0,0,0,n],[0,e,0,0,n],[0,0,e,0,n],[0,0,0,this._filter_op,0]];r.setAttribute("values",this.arraytomatrixval(i))}}},{key:"brightness",set:function(t){if(this.isSafari)this.filters[2]="brightness(".concat(t,")");else{var e=this.svg.getElementById("brightness"),r=[[t,0,0,0,0],[0,t,0,0,0],[0,0,t,0,0],[0,0,0,this._filter_op,0]];e.setAttribute("values",this.arraytomatrixval(r))}}},{key:"saturate",set:function(t){var e=Math.max(0,t);if(this.isSafari)this.filters[3]="saturate(".concat(e,")");else{var r=this.svg.getElementById("saturate"),n=[m(e,0,1,.213,1),m(e,0,1,.715,0),m(e,0,1,.072,0),m(e,0,1,.213,0),m(e,0,1,.715,1),m(e,0,1,.072,0),m(e,0,1,.213,0),m(e,0,1,.715,0),m(e,0,1,.072,1)],i=[[n[0],n[1],n[2],0,0],[n[3],n[4],n[5],0,0],[n[6],n[7],n[8],0,0],[0,0,0,this._filter_op,0]];r.setAttribute("values",this.arraytomatrixval(i))}}},{key:"hue_rotate",set:function(t){if(this.isSafari)this.filters[4]="hue-rotate(".concat(t,"deg)");else{var e=this.svg.getElementById("hue-rotate"),r=t/180*Math.PI,n=[Math.cos(r),Math.sin(r),1/3,Math.sqrt(1/3)],i=n[0],a=n[1],o=n[2],s=n[3],c=[[i+(1-i)*o,o*(1-i)-s*a,o*(1-i)+s*a,0,0],[o*(1-i)+s*a,i+o*(1-i),o*(1-i)-s*a,0,0],[o*(1-i)-s*a,o*(1-i)+s*a,i+o*(1-i),0,0],[0,0,0,this._filter_op,0]];e.setAttribute("values",this.arraytomatrixval(c))}}},{key:"invert",set:function(t){var e=b(t,0,1);if(this.isSafari)this.filters[5]="invert(".concat(e,")");else{var r=this.svg.getElementById("invert"),n=m(e,0,1,1,-1),i=m(n,1,-1,0,1),a=[[n,0,0,0,i],[0,n,0,0,i],[0,0,n,0,i],[0,0,0,this._filter_op,0]];r.setAttribute("values",this.arraytomatrixval(a))}}},{key:"opacity",set:function(t){var e=this;if(this._filter_op=b(t,0,1),this.isSafari)this.filters[6]="opacity(".concat(this._filter_op,")");else{["contrast","brightness","saturate","hue-rotate","invert","grayscale","sepia","binarize"].map(function(t){var r=e.getAttribute(t);if(null===r)return!1;"contrast"===t&&(e.contrast=r),"brightness"===t&&(e.brightness=r),"saturate"===t&&(e.saturate=r),"hue-rotate"===t&&(e.hue_rotate=r),"invert"===t&&(e.invert=r),"grayscale"===t&&(e.grayscale=r),"sepia"===t&&(e.sepia=r),"binarize"===t&&(e.binarize=r)}).includes(void 0)||this.svg.getElementById("contrast").setAttribute("values",this.arraytomatrixval([[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,this._filter_op,0]]))}}},{key:"grayscale",set:function(t){if(this.isSafari){var e=b(t,0,1);this.filters[7]="grayscale(".concat(e,")")}else{var r=1-b(t,0,1),n=this.svg.getElementById("grayscale"),i=[m(r,0,1,.213,1),m(r,0,1,.715,0),m(r,0,1,.072,0),m(r,0,1,.213,0),m(r,0,1,.715,1),m(r,0,1,.072,0),m(r,0,1,.213,0),m(r,0,1,.715,0),m(r,0,1,.072,1)],a=[[i[0],i[1],i[2],0,0],[i[3],i[4],i[5],0,0],[i[6],i[7],i[8],0,0],[0,0,0,this._filter_op,0]];n.setAttribute("values",this.arraytomatrixval(a))}}},{key:"sepia",set:function(t){if(this.isSafari){var e=b(t,0,1);this.filters[8]="sepia(".concat(e,")")}else{var r=this.svg.getElementById("sepia"),n=1-b(t,0,1),i=[m(n,0,1,.393,1),m(n,0,1,.769,0),m(n,0,1,.189,0),m(n,0,1,.349,0),m(n,0,1,.686,1),m(n,0,1,.168,0),m(n,0,1,.272,0),m(n,0,1,.534,0),m(n,0,1,.131,1)],a=[[i[0],i[1],i[2],0,0],[i[3],i[4],i[5],0,0],[i[6],i[7],i[8],0,0],[0,0,0,this._filter_op,0]];r.setAttribute("values",this.arraytomatrixval(a))}}}])&&t(s.prototype,c),l&&t(s,l),o}();customElements.define("rikaaa-img-extra",A)}();